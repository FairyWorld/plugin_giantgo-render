import{G as e,H as t,s as o,r as l,o as i,c as a,d as n,t as s,I as r,i as d,x as c,m as u,n as m,y as p,h as f,J as h,z as g}from"./vendor.2ce5283c.js";import{d as b,u as y,a as v,i as k}from"./index.f44638dc.js";const w=[{required:!1,message:"必填项",trigger:"blur"}],V=[{name:"输入框",type:String,component:"input",uuid:"",options:{label:"输入框",key:"",defaultValue:"",width:"100%",placeholder:"请输入",prefixIcon:"",suffixIcon:"",hidden:!1,clearable:!1,disabled:!1,showPassword:!1,maxlength:void 0,showWordLimit:!1,rules:w}},{name:"文本框",type:String,component:"textarea",uuid:"",options:{label:"文本框",key:"",defaultValue:"",width:"100%",placeholder:"请输入内容",rows:4,hidden:!1,disabled:!1,maxlength:void 0,showWordLimit:!1,rules:w}},{name:"数字输入框",type:Number,component:"number",uuid:"",options:{label:"数字输入框",key:"",defaultValue:10,width:"100%",min:0,max:100,hidden:!1,disabled:!1,rules:w}}],D=[{name:"下拉单选",type:String,component:"select",uuid:"",options:{label:"下拉单选",key:"",defaultValue:void 0,placeholder:"请选择",noDataText:"暂无数据",noMatchText:"无匹配数据",width:"100%",hidden:!1,clearable:!1,disabled:!1,filterable:!1,rules:w,options:{remote:!1,items:[]}}},{name:"下拉多选",type:Array,component:"multi-select",uuid:"",options:{label:"下拉多选",key:"",defaultValue:[],placeholder:"请选择",noDataText:"暂无数据",noMatchText:"无匹配数据",width:"100%",hidden:!1,clearable:!1,disabled:!1,filterable:!1,collapseTags:!1,multipleLimit:0,rules:w,options:{remote:!1,items:[]}}},{name:"级联选择器",type:Array,component:"cascader",uuid:"",options:{label:"级联选择器",key:"",defaultValue:[],placeholder:"请选择",width:"100%",expandTrigger:"click",hidden:!1,clearable:!1,disabled:!1,filterable:!1,collapseTags:!1,multipleLimit:0,rules:w,options:{remote:!1,items:[]}}},{name:"多选框",type:Array,component:"checkbox",uuid:"",options:{label:"多选框",key:"",defaultValue:[],width:"100%",hidden:!1,disabled:!1,rules:w,options:{remote:!1,items:[]}}},{name:"单选框",type:String,component:"radio",uuid:"",options:{label:"单选框",key:"",defaultValue:"",width:"100%",hidden:!1,disabled:!1,rules:w,options:{remote:!1,items:[]}}},{name:"时间选择器",type:Date,component:"time-picker",uuid:"",options:{label:"时间选择器",key:"",defaultValue:void 0,placeholder:"请选择",width:"100%",prefixIcon:"el-icon-time",format:"HH:mm:ss",hidden:!1,clearable:!1,disabled:!1,rules:w}},{name:"时间范围",type:Array,component:"time-range-picker",uuid:"",options:{label:"时间范围",key:"",defaultValue:[],placeholder:"请选择",width:"100%",prefixIcon:"el-icon-time",format:"HH:mm:ss",hidden:!1,clearable:!1,disabled:!1,rules:w}},{name:"日期选择器",type:Date,component:"date-picker",uuid:"",options:{label:"日期选择器",key:"",defaultValue:void 0,placeholder:"请选择",width:"100%",prefixIcon:"el-icon-time",format:"YYYY-MM-DD",hidden:!1,clearable:!1,disabled:!1,rules:w}},{name:"日期范围",type:Array,component:"date-range-picker",uuid:"",options:{label:"日期范围",key:"",defaultValue:[],placeholder:"请选择",width:"100%",prefixIcon:"el-icon-time",format:"YYYY-MM-DD",hidden:!1,clearable:!1,disabled:!1,rules:w}},{name:"评分",type:Number,component:"rate",uuid:"",options:{label:"评分",key:"",defaultValue:3,width:"100%",max:5,hidden:!1,disabled:!1,allowHalf:!1,rules:w}},{name:"滑块",type:Number,component:"slider",uuid:"",options:{label:"滑块",key:"",defaultValue:10,width:"100%",min:0,max:100,step:1,hidden:!1,disabled:!1,showStops:!1,showToolTip:!0,showInput:!1,rules:w}},{name:"开关",type:Boolean,component:"switch",uuid:"",options:{label:"开关",key:"",defaultValue:!1,width:"100%",hidden:!1,disabled:!1,activeText:"",inactiveText:"",activeColor:"#409EFF",inactiveColor:"#C0CCDA",rules:w}},{name:"颜色选择器",type:String,component:"color-picker",uuid:"",options:{label:"颜色选择器",key:"",defaultValue:"",width:"100%",hidden:!1,disabled:!1,showAlpha:!1,rules:w}},{name:"文件上传",type:Array,component:"upload",uuid:"",options:{label:"文件上传",key:"",defaultValue:[],width:"100%",uploadUrl:"https://jsonplaceholder.typicode.com/posts/",uploadName:"file",buttonText:"上传文件",uploadSize:"500KB",tip:"",uploadData:{},uploadHeaders:{},limit:3,hidden:!1,disabled:!1,showToolTip:!1,showFileList:!1,multiple:!1,rules:w}}],x=[{name:"富文本编辑器",type:String,component:"editor",uuid:"",options:{label:"富文本编辑器",key:"",defaultValue:"",width:"100%",placeholder:"请输入",hidden:!1,disabled:!1,rules:w}},{name:"列表",type:Array,component:"table",uuid:"",options:{label:"列表",key:"",width:"100%"}}],S=[{name:"对象布局",type:Object,component:"object",uuid:"",options:{label:"对象布局",key:"",width:"100%",gutter:0},items:[]},{name:"卡片布局",type:Object,component:"card",uuid:"",options:{label:"卡片布局",key:"",width:"100%",gutter:0,shadow:"always"},items:[]}],_={name:"表单",type:Object,component:"object",uuid:"root",options:{labelWidth:"120px",labelPosition:"right",size:"medium",gutter:0,hideRequiredAsterisk:!1,statusIcon:!1},items:[]};const I={components:{draggable:o},setup:()=>({clone:e=>{const t=b(e);return t.uuid=t.options.key=t.component+"-"+y(16),t},inputs:V,pickers:D,complexs:x,layouts:S})},T=r();e("data-v-5f8168ce");const j={class:"form-item-picker"},A={class:"form-item-section"},C=n("div",{class:"title"},"输入组件",-1),F={class:"form-item-drop"},N={class:"form-item-section"},O=n("div",{class:"title"},"选择组件",-1),U={class:"form-item-drop"},Y={class:"form-item-section"},H=n("div",{class:"title"},"复杂组件",-1),M={class:"form-item-drop"},J={class:"form-item-section"},L=n("div",{class:"title"},"布局组件",-1),z={class:"form-item-drop"};t();const R=T(((e,t,o,r,d,c)=>{const u=l("draggable");return i(),a("div",j,[n("div",A,[C,n(u,{class:"form-item-group",modelValue:r.inputs,"onUpdate:modelValue":t[1]||(t[1]=e=>r.inputs=e),"item-key":"name",group:{name:"form-draggable",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:r.clone},{item:T((({element:e})=>[n("div",F,s(e.name),1)])),_:1},8,["modelValue","clone"])]),n("div",N,[O,n(u,{class:"form-item-group",modelValue:r.pickers,"onUpdate:modelValue":t[2]||(t[2]=e=>r.pickers=e),"item-key":"name",group:{name:"form-draggable",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:r.clone},{item:T((({element:e})=>[n("div",U,s(e.name),1)])),_:1},8,["modelValue","clone"])]),n("div",Y,[H,n(u,{class:"form-item-group",modelValue:r.complexs,"onUpdate:modelValue":t[3]||(t[3]=e=>r.complexs=e),"item-key":"name",group:{name:"form-draggable",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:r.clone},{item:T((({element:e})=>[n("div",M,s(e.name),1)])),_:1},8,["modelValue","clone"])]),n("div",J,[L,n(u,{class:"form-item-group",modelValue:r.layouts,"onUpdate:modelValue":t[4]||(t[4]=e=>r.layouts=e),"item-key":"name",group:{name:"form-draggable",pull:"clone",put:!1},"ghost-class":"ghost",sort:!1,clone:r.clone},{item:T((({element:e})=>[n("div",z,s(e.name),1)])),_:1},8,["modelValue","clone"])])])}));I.render=R,I.__scopeId="data-v-5f8168ce";const W={props:{},setup(){}},q=r();e("data-v-03d56f36");const B={class:"form-setting"};t();const P=q(((e,t,o,s,r,d)=>{const c=l("form-option");return i(),a("div",B,[n(c)])}));W.render=P,W.__scopeId="data-v-03d56f36";const E={components:{},setup(){const e=d(null),t=d(!1),o=c({title:"",isShow:!1}),l=d(""),i=u("state"),a=u("clear"),n=u("revoke"),s=u("forward");return{previewDialog:t,codeDialog:o,code:l,clear:()=>a(),revoke:n,forward:s,preview:()=>{t.value=!0,p((()=>{e.value&&e.value.init(i.formDesign)}))},submit:e=>{o.title="获取数据",o.isShow=!0,p((()=>{l.value=JSON.stringify(e,null,"\t")}))},json:()=>{o.title="查看JSON",o.isShow=!0,p((()=>{l.value=JSON.stringify(i.formDesign,null,"\t")}))},formRender:e,cached:m((()=>i.cached)),current:m((()=>i.current))}}},G=r();e("data-v-074f1408");const K={class:"form-operator"},Q={class:"json-box"};t();const X=G(((e,t,o,s,r,d)=>{const c=l("el-tooltip"),u=l("el-divider"),m=l("form-render"),p=l("el-dialog"),f=l("code-mirror");return i(),a("div",K,[n("div",null,[n(c,{class:"item",effect:"dark",content:"预览",placement:"bottom"},{default:G((()=>[n("i",{class:"el-icon-video-play",onClick:t[1]||(t[1]=(...e)=>s.preview&&s.preview(...e))})])),_:1}),n(c,{class:"item",effect:"dark",content:"查看JSON",placement:"bottom"},{default:G((()=>[n("i",{class:"el-icon-view",onClick:t[2]||(t[2]=(...e)=>s.json&&s.json(...e))})])),_:1}),n(c,{class:"item",effect:"dark",content:"清空",placement:"bottom"},{default:G((()=>[n("i",{class:"el-icon-delete",onClick:t[3]||(t[3]=(...e)=>s.clear&&s.clear(...e))})])),_:1}),n(u,{direction:"vertical"}),n(c,{class:"item",effect:"dark",content:"后退",placement:"bottom"},{default:G((()=>[n("i",{class:["el-icon-refresh-left",{disabled:s.current<=0}],onClick:t[4]||(t[4]=(...e)=>s.revoke&&s.revoke(...e))},null,2)])),_:1}),n(c,{class:"item",effect:"dark",content:"前进",placement:"bottom"},{default:G((()=>[n("i",{class:["el-icon-refresh-right",{disabled:s.current>=s.cached.length-1}],onClick:t[5]||(t[5]=(...e)=>s.forward&&s.forward(...e))},null,2)])),_:1})]),n(p,{title:"预览",modelValue:s.previewDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>s.previewDialog=e),"destroy-on-close":"",width:"750px"},{default:G((()=>[n(m,{ref:"formRender",onSubmit:s.submit},null,8,["onSubmit"])])),_:1},8,["modelValue"]),n(p,{title:s.codeDialog.title,modelValue:s.codeDialog.isShow,"onUpdate:modelValue":t[8]||(t[8]=e=>s.codeDialog.isShow=e),width:"750px"},{default:G((()=>[n("div",Q,[n(f,{modelValue:s.code,"onUpdate:modelValue":t[7]||(t[7]=e=>s.code=e)},null,8,["modelValue"])])])),_:1},8,["title","modelValue"])])}));E.render=X,E.__scopeId="data-v-074f1408";const Z=(e,t)=>{let o=!1;if(!t)return!1;for(let l=0;l<e.length;l++){if(e[l].uuid===t)return e[l];if(e[l].items&&e[l].items.length&&(o=Z(e[l].items,t),!k(o)))return o}return o},$=(e,t)=>{if(!t)return!1;for(let o=0;o<e.length;o++){if(e[o].uuid===t){let t=b(e[o]);const l=t.component+"-"+y(16);return t.uuid=t.options.key=l,t.items=[],e.splice(o+1,0,t),t}if(e[o].items&&e[o].items.length){const l=$(e[o].items,t);if(l)return l}}return!1},ee=(e,t)=>{if(!t)return!1;for(let o=0;o<e.length;o++){if(e[o].uuid===t)return e.splice(o,1),!0;if(e[o].items&&e[o].items.length&&ee(e[o].items,t))return!0}},te={components:{left:I,right:W,operator:E},setup(){let e=c({formDesign:{},selected:{},cached:[],current:-1});const t=t=>{e.selected=Z([e.formDesign],t)||e.formDesign},o=()=>{e.cached.length>=10&&e.cached.shift(),e.cached.splice(e.current+1,1/0,b(e.formDesign)),e.current=e.cached.length-1},l=t=>{const l=t||b(_);e.formDesign=l,e.selected=l,o()};return l(),f((()=>e.formDesign),v((()=>{g.success("已自动保存")}),3e3),{deep:!0}),h("state",e),h("clear",l),h("setSelected",t),h("updateFormItem",(({uuid:t,items:l})=>{const i=Z([e.formDesign],t);i&&(i.items=l),o()})),h("updateFormOption",(({key:t,value:l})=>{e.selected.options[t]=l,o()})),h("copyFormItem",(t=>{const l=$(e.formDesign.items,t);e.selected=l,o()})),h("removeFormItem",(t=>{ee(e.formDesign.items,t),e.selected=e.formDesign,o()})),h("revoke",(()=>{e.cached.length&&e.current>0&&(e.current--,e.formDesign=b(e.cached[e.current]),t(e.selected.uuid))})),h("forward",(()=>{e.cached.length&&e.current<e.cached.length-1&&(e.current++,e.formDesign=b(e.cached[e.current]),t(e.selected.uuid))})),{init:l}}},oe={class:"form-design-container"},le={class:"left-container"},ie={class:"center-container"},ae={class:"right-container"};te.render=function(e,t,o,s,r,d){const c=l("left"),u=l("operator"),m=l("form-builder"),p=l("right");return i(),a("div",oe,[n("div",le,[n(c)]),n("div",ie,[n(u),n(m)]),n("div",ae,[n(p)])])};const ne={name:"Dashboard",components:{FormDesign:te},setup(){}};ne.render=function(e,t,o,n,s,r){const d=l("form-design");return i(),a(d)};export default ne;
